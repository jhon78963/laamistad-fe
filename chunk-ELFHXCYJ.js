import{b as f,e as k}from"./chunk-SB5CWCWN.js";import{a as G,b as x,c as I,d as C,e as L,f as D,g as _,h as F,i as N,j,l as O,m as q}from"./chunk-TLUHVVA6.js";import{a as S}from"./chunk-7MR2XX67.js";import"./chunk-QTD55MGT.js";import{a as w,b as v,c as E}from"./chunk-RYY6YJOR.js";import{d as h}from"./chunk-G23FBSDY.js";import"./chunk-RYT2OFC3.js";import{Db as b,Ha as m,S as g,Ua as y,ib as c,jb as n,kb as r,lb as d,rb as p,yb as i}from"./chunk-TUAG2WWI.js";var s=class extends Error{};s.prototype.name="InvalidTokenError";function M(a){return decodeURIComponent(atob(a).replace(/(.)/g,(e,t)=>{let o=t.charCodeAt(0).toString(16).toUpperCase();return o.length<2&&(o="0"+o),"%"+o}))}function T(a){let e=a.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return M(e)}catch{return atob(e)}}function R(a,e){if(typeof a!="string")throw new s("Invalid token specified: must be a string");e||(e={});let t=e.header===!0?0:1,o=a.split(".")[t];if(typeof o!="string")throw new s(`Invalid token specified: missing part #${t+1}`);let l;try{l=T(o)}catch(u){throw new s(`Invalid token specified: invalid base64 for part #${t+1} (${u.message})`)}try{return JSON.parse(l)}catch(u){throw new s(`Invalid token specified: invalid json for part #${t+1} (${u.message})`)}}var U=()=>["/registro"],V=class a{loginStore=g(k);faGoogle=f;formBuilder=g(O);form=this.formBuilder.group({email:["",x.required],password:["",x.required]});constructor(){w.add(f)}ngOnInit(){let e=()=>{google.accounts.id.initialize({client_id:S,callback:t=>{this.handleGoogleLogin(t)}})};if(typeof google<"u"&&google.accounts)e();else{let t=setInterval(()=>{typeof google<"u"&&google.accounts&&(clearInterval(t),e())},300)}}loginWithGoogle(){google.accounts.id.prompt()}handleGoogleLogin(e){let t=e.credential,o=R(t);console.log("Datos usuario Google:",o),this.loginStore.googleLogin(t).subscribe({next:l=>{console.log(l)},error:l=>{console.log(l)}})}loginWithEmail(){this.loginStore.login(this.form.value).subscribe({next:e=>{console.log(e)},error:e=>{console.log(e)}})}static \u0275fac=function(t){return new(t||a)};static \u0275cmp=y({type:a,selectors:[["app-login"]],decls:37,vars:4,consts:[[1,"max-w-md","mx-auto","bg-white","rounded-xl","shadow-lg","p-8","my-16"],[1,"text-center"],[1,"text-2xl","font-bold","text-gray-800"],[1,"text-gray-500","mt-2"],[1,"mt-8"],["type","button",1,"w-full","flex","items-center","justify-center","gap-3","py-3","px-4","border","border-gray-300","rounded-lg","hover:bg-gray-50","transition","duration-300","text-lg","shadow-sm","cursor-pointer",3,"click"],[1,"text-red-500",3,"icon"],[1,"relative","my-6"],[1,"absolute","inset-0","flex","items-center"],[1,"w-full","border-t","border-gray-300"],[1,"relative","flex","justify-center","text-sm"],[1,"bg-white","px-2","text-gray-500"],[3,"formGroup"],[1,"space-y-4"],["for","email",1,"block","text-sm","font-medium","text-gray-700","text-left","sr-only"],["type","email","name","email","id","email","formControlName","email","required","","email","","placeholder","tu@email.com",1,"w-full","py-3","px-4","border","border-gray-300","rounded-lg","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-green-500"],["for","password",1,"block","text-sm","font-medium","text-gray-700","text-left","sr-only"],["type","password","name","password","id","password","formControlName","password","required","","minlength","6","placeholder","Contrase\xF1a",1,"w-full","py-3","px-4","border","border-gray-300","rounded-lg","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-green-500"],[1,"w-full","flex","justify-center","py-3","px-4","border","border-transparent","rounded-lg","shadow-sm","text-lg","font-medium","text-white","bg-gray-800","hover:bg-gray-900","transition","duration-300","disabled:opacity-50","cursor-pointer","disabled:cursor-not-allowed",3,"click"],[1,"text-center","mt-8","text-sm","text-gray-600"],["href","#",1,"font-medium","text-blue-600","hover:text-blue-500","underline",3,"routerLink"],[1,"text-center","mt-4","text-xs","text-gray-500"],["href","#",1,"underline"]],template:function(t,o){t&1&&(n(0,"div",0)(1,"div",1)(2,"h2",2),i(3,"Ingresa o Reg\xEDstrate"),r(),n(4,"p",3),i(5,"Usa tu cuenta de Google o tu email para acceder."),r()(),n(6,"div",4)(7,"button",5),p("click",function(){return o.loginWithGoogle()}),d(8,"fa-icon",6),i(9," Continuar con Google "),r()(),n(10,"div",7)(11,"div",8),d(12,"span",9),r(),n(13,"div",10)(14,"span",11),i(15,"O ingresa con tu email"),r()()(),n(16,"form",12)(17,"div",13)(18,"div")(19,"label",14),i(20," Email "),r(),d(21,"input",15),r(),n(22,"div")(23,"label",16),i(24," Contrase\xF1a "),r(),d(25,"input",17),r(),n(26,"button",18),p("click",function(){return o.loginWithEmail()}),i(27," Ingresar "),r()()(),n(28,"p",19),i(29," \xBFNo tienes una cuenta? "),n(30,"a",20),i(31," Reg\xEDstrate aqu\xED "),r()(),n(32,"p",21),i(33," Al continuar, aceptas nuestros "),n(34,"a",22),i(35,"T\xE9rminos de Servicio"),r(),i(36,". "),r()()),t&2&&(m(8),c("icon",o.faGoogle),m(8),c("formGroup",o.form),m(14),c("routerLink",b(3,U)))},dependencies:[E,v,q,L,G,I,C,F,j,N,D,_,h],encapsulation:2})};export{V as Login};
