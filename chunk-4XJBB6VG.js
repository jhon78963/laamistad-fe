import{a as $}from"./chunk-QTD55MGT.js";import{d as V}from"./chunk-G23FBSDY.js";import"./chunk-RYT2OFC3.js";import{Ab as F,Bb as P,Ha as l,Hb as s,S as R,Ua as f,X as S,Y as _,Z as C,_ as D,cb as v,db as h,fa as g,fb as L,gb as M,hb as w,ib as I,jb as p,kb as E,lb as O,mb as n,nb as o,ob as x,pb as k,qb as N,sb as c,tb as m,xb as T,yb as i,zb as b}from"./chunk-TUAG2WWI.js";var j=(a,t)=>t.key;function Y(a,t){if(a&1){let e=k();n(0,"div",28),c("click",function(){S(e);let d=m().$implicit,u=m();return _(u.selectDay(d.day))}),i(1),o()}if(a&2){let e=m().$implicit,r=m();T("calendar-day p-2 text-center cursor-pointer hover:bg-green-100 rounded-full transition-all "+(r.selectedDay()===e.day?"selected":"")),l(),F(" ",e.day," ")}}function J(a,t){a&1&&x(0,"div")}function U(a,t){if(a&1&&v(0,Y,2,3,"div",17)(1,J,1,0,"div"),a&2){let e=t.$implicit;h(e.day?0:1)}}function B(a,t){if(a&1){let e=k();n(0,"div",28),c("click",function(){let d=S(e).$implicit,u=m();return _(u.handleTimeSlotClick(d))}),i(1),o()}if(a&2){let e=t.$implicit,r=m();T(r.getTimeSlotClasses(e)),l(),F(" ",e," ")}}var y=class a{HOURLY_RATE=10;RESERVED_SLOTS=[""];ALL_TIME_SLOTS=["08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00"];monthNames=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];currentDate=g(new Date(2025,9,19));selectedDay=g(null);selectedSlots=g([]);selectedCourt=g("Cancha de Fulbito 1");year=s(()=>this.currentDate().getFullYear());month=s(()=>this.currentDate().getMonth());firstDayOfMonth=s(()=>new Date(this.year(),this.month(),1).getDay());daysInMonth=s(()=>new Date(this.year(),this.month()+1,0).getDate());calendarDays=s(()=>{let t=[];for(let e=0;e<this.firstDayOfMonth();e++)t.push({day:null,key:`empty-${e}`});for(let e=1;e<=this.daysInMonth();e++)t.push({day:e,key:`day-${e}`});return t});totalPrice=s(()=>this.selectedSlots().length*this.HOURLY_RATE);formattedSelectedDate=s(()=>{let t=this.selectedDay();if(!t)return"--/--/----";let e=String(this.month()+1).padStart(2,"0");return`${String(t).padStart(2,"0")}/${e}/${this.year()}`});handleMonthChange(t){this.currentDate.update(e=>new Date(e.getFullYear(),e.getMonth()+t,1)),this.selectedDay.set(null),this.selectedSlots.set([])}selectDay(t){this.selectedDay.set(t)}handleTimeSlotClick(t){this.RESERVED_SLOTS.includes(t)||this.selectedSlots.update(e=>e.includes(t)?e.filter(r=>r!==t):[...e,t])}onCourtChange(t){let e=t.target;this.selectedCourt.set(e.value)}getTimeSlotClasses(t){let e=this.RESERVED_SLOTS.includes(t),r=this.selectedSlots().includes(t),d="time-slot text-center p-2 border rounded-lg ";return e?d+="reserved bg-gray-200 text-gray-500 cursor-not-allowed":r?d+="selected":d+="available cursor-pointer",d}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=f({type:a,selectors:[["app-reservation-form"]],decls:71,vars:6,consts:[[1,"bg-white","rounded-xl","shadow-lg","p-6","md:p-8","w-full","max-w-4xl"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-8"],[1,"text-xl","font-bold","text-gray-800","mb-4"],[1,"bg-white","rounded-lg"],[1,"flex","justify-between","items-center","mb-4"],["aria-label","Mes anterior",1,"p-2","rounded-full","hover:bg-gray-100",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 320 512","fill","currentColor",1,"w-4","h-4"],["d","M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"],["id","month-year",1,"font-bold","text-lg"],["aria-label","Mes siguiente",1,"p-2","rounded-full","hover:bg-gray-100",3,"click"],["d","M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"],[1,"grid","grid-cols-7","gap-2","text-center","text-sm","text-gray-500","mb-2"],["id","calendar-days",1,"grid","grid-cols-7","gap-2"],[1,"mb-4"],["htmlFor","court",1,"block","text-gray-700","font-medium","mb-2"],["id","court","name","court",1,"w-full","px-4","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-green-500",3,"change","value"],["id","time-slots-container",1,"grid","grid-cols-3","sm:grid-cols-4","gap-2","h-48","overflow-y-auto","pr-2"],[3,"class"],[1,"mt-8","pt-6","border-t"],[1,"text-xl","font-bold","text-gray-800"],[1,"flex","flex-col","sm:flex-row","justify-between","items-start","sm:items-center","mt-4","gap-4"],["id","summary-date",1,"font-bold"],["id","summary-hours",1,"font-bold"],[1,"text-left","sm:text-right"],[1,"text-gray-600"],[1,"text-2xl","font-bold","text-green-600"],["id","summary-total"],[1,"w-full","mt-6","bg-green-500","text-white","font-bold","py-3","rounded-lg","hover:bg-green-600","transition-all","shadow-md"],[3,"click"]],template:function(e,r){e&1&&(n(0,"div",0)(1,"div",1)(2,"div")(3,"h3",2),i(4,"1. Elige una fecha"),o(),n(5,"div",3)(6,"div",4)(7,"button",5),c("click",function(){return r.handleMonthChange(-1)}),C(),n(8,"svg",6),x(9,"path",7),o()(),D(),n(10,"h3",8),i(11),o(),n(12,"button",9),c("click",function(){return r.handleMonthChange(1)}),C(),n(13,"svg",6),x(14,"path",10),o()()(),D(),n(15,"div",11)(16,"div"),i(17,"Dom"),o(),n(18,"div"),i(19,"Lun"),o(),n(20,"div"),i(21,"Mar"),o(),n(22,"div"),i(23,"Mi\xE9"),o(),n(24,"div"),i(25,"Jue"),o(),n(26,"div"),i(27,"Vie"),o(),n(28,"div"),i(29,"S\xE1b"),o()(),n(30,"div",12),M(31,U,2,1,null,null,j),o()()(),n(33,"div")(34,"h3",2),i(35,"2. Elige Cancha y Hora"),o(),n(36,"div",13)(37,"label",14),i(38,"Cancha Deportiva"),o(),n(39,"select",15),c("change",function(u){return r.onCourtChange(u)}),n(40,"option"),i(41,"Cancha de Fulbito 1"),o(),n(42,"option"),i(43,"Cancha de V\xF3ley"),o(),n(44,"option"),i(45,"Cancha Multiusos"),o()()(),n(46,"div",16),M(47,B,2,3,"div",17,L),o()()(),n(49,"div",18)(50,"h3",19),i(51,"3. Resumen y Pago"),o(),n(52,"div",20)(53,"div")(54,"p"),i(55," Fecha: "),n(56,"span",21),i(57),o()(),n(58,"p"),i(59," Horas seleccionadas: "),n(60,"span",22),i(61),o()()(),n(62,"div",23)(63,"p",24),i(64,"Total a pagar:"),o(),n(65,"p",25),i(66," S/ "),n(67,"span",26),i(68),o()()()(),n(69,"button",27),i(70," Proceder al Pago "),o()()()),e&2&&(l(11),P(" ",r.monthNames[r.month()]," ",r.year()," "),l(20),w(r.calendarDays()),l(8),N("value",r.selectedCourt()),l(8),w(r.ALL_TIME_SLOTS),l(10),b(r.formattedSelectedDate()),l(4),b(r.selectedSlots().length),l(7),b(r.totalPrice().toFixed(2)))},styles:['@charset "UTF-8";.calendar-day.selected[_ngcontent-%COMP%]{background-color:#22c55e;color:#fff}.time-slot.available[_ngcontent-%COMP%]:hover{background-color:#dcfce7;border-color:#22c55e}.time-slot.selected[_ngcontent-%COMP%]{background-color:#22c55e;color:#fff;border-color:#16a34a}#time-slots-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}#time-slots-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:10px}#time-slots-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ccc;border-radius:10px}#time-slots-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#aaa}'],changeDetection:0})};function G(a,t){a&1&&(p(0,"h2",2),i(1,"Realizar una Reserva"),E(),O(2,"app-reservation-form"))}function q(a,t){a&1&&(p(0,"div",1)(1,"p",3),i(2," Debes iniciar sesi\xF3n para poder realizar una reserva. "),E(),p(3,"a",4),i(4," Iniciar Sesi\xF3n "),E()()),a&2&&(l(3),I("routerLink","/login"))}var A=class a{localStorageStore=R($);isLogin=!1;ngOnInit(){this.localStorageStore.watch("tokenData").subscribe(t=>{this.isLogin=!!(t&&t.accessToken)})}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=f({type:a,selectors:[["app-reservation"]],decls:3,vars:1,consts:[[1,"max-w-4xl","mx-auto","py-4","px-4"],[1,"flex","flex-col","items-center","justify-center","min-h-[60vh]","text-center"],[1,"text-3xl","font-bold","text-gray-800","mb-6","text-center"],[1,"text-lg","text-gray-700","mb-4"],[1,"bg-green-500","text-white","px-5","py-2.5","rounded-full","hover:bg-green-600","transition","duration-300","shadow-md",3,"routerLink"]],template:function(e,r){e&1&&(p(0,"div",0),v(1,G,3,0)(2,q,5,1,"div",1),E()),e&2&&(l(),h(r.isLogin?1:2))},dependencies:[y,V],encapsulation:2})};export{A as Reservation};
