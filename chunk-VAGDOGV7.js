import{b as m,c as u,f as w,g as k}from"./chunk-LC4I47FM.js";import"./chunk-3ECMZKAT.js";import{a as h,b as x,c as v}from"./chunk-IKUV46AB.js";import"./chunk-X2ZNXJGB.js";import{Fa as g,Q as f,Sa as b,fb as d,gb as a,hb as l,ib as p,ob as y,ub as i}from"./chunk-UB3J4FW2.js";var c=class extends Error{};c.prototype.name="InvalidTokenError";function G(n){return decodeURIComponent(atob(n).replace(/(.)/g,(t,e)=>{let o=e.charCodeAt(0).toString(16).toUpperCase();return o.length<2&&(o="0"+o),"%"+o}))}function S(n){let t=n.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return G(t)}catch{return atob(t)}}function I(n,t){if(typeof n!="string")throw new c("Invalid token specified: must be a string");t||(t={});let e=t.header===!0?0:1,o=n.split(".")[e];if(typeof o!="string")throw new c(`Invalid token specified: missing part #${e+1}`);let r;try{r=S(o)}catch(s){throw new c(`Invalid token specified: invalid base64 for part #${e+1} (${s.message})`)}try{return JSON.parse(r)}catch(s){throw new c(`Invalid token specified: invalid json for part #${e+1} (${s.message})`)}}var E=class n{loginStore=f(k);faGoogle=m;faFacebook=u;constructor(){h.add(m,u)}ngOnInit(){let t=()=>{google.accounts.id.initialize({client_id:w,callback:e=>{this.handleGoogleLogin(e)}})};if(typeof google<"u"&&google.accounts)t();else{let e=setInterval(()=>{typeof google<"u"&&google.accounts&&(clearInterval(e),t())},300)}}loginWithGoogle(){google.accounts.id.prompt()}handleGoogleLogin(t){let e=t.credential,o=I(e);console.log("Datos usuario Google:",o),this.loginStore.googleLogin(e).subscribe({next:r=>{console.log(r)},error:r=>{console.log(r)}})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=b({type:n,selectors:[["app-login"]],decls:17,vars:2,consts:[[1,"max-w-md","mx-auto","bg-white","rounded-xl","shadow-lg","p-8","text-center","my-16"],[1,"text-2xl","font-bold","text-gray-800"],[1,"text-gray-500","mt-2"],[1,"mt-8","space-y-4"],["type","button",1,"w-full","flex","items-center","justify-center","gap-3","py-3","px-4","border","border-gray-300","rounded-lg","hover:bg-gray-50","transition","duration-300","text-lg","shadow-sm",3,"click"],[1,"text-red-500",3,"icon"],["type","button",1,"w-full","flex","items-center","justify-center","gap-3","py-3","px-4","border","border-gray-300","rounded-lg","hover:bg-gray-50","transition","duration-300","text-lg","shadow-sm"],[1,"text-blue-600",3,"icon"],[1,"text-center","mt-8","text-xs","text-gray-500"],["href","#",1,"underline"]],template:function(e,o){e&1&&(a(0,"div",0)(1,"h2",1),i(2,"Ingresa o Reg\xEDstrate"),l(),a(3,"p",2),i(4,"Usa tu cuenta de Google o Facebook para acceder a las reservas."),l(),a(5,"div",3)(6,"button",4),y("click",function(){return o.loginWithGoogle()}),p(7,"fa-icon",5),i(8," Continuar con Google "),l(),a(9,"button",6),p(10,"fa-icon",7),i(11," Continuar con Facebook "),l()(),a(12,"p",8),i(13," Al continuar, si no tienes una cuenta, la crearemos por ti. Esto significa que aceptas nuestros "),a(14,"a",9),i(15,"T\xE9rminos de Servicio"),l(),i(16,". "),l()()),e&2&&(g(7),d("icon",o.faGoogle),g(3),d("icon",o.faFacebook))},dependencies:[v,x],encapsulation:2})};export{E as Login};
